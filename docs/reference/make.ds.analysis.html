<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates an Analysis object — make.ds.analysis • dsims</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates an Analysis object — make.ds.analysis"><meta name="description" content="This method creates an Analysis objects which describes a one or more
models to fit to the distance data. The simulation will fit each of these
models to the data generated in the simulation and select the model with
the minimum criteria value."><meta property="og:description" content="This method creates an Analysis objects which describes a one or more
models to fit to the distance data. The simulation will fit each of these
models to the data generated in the simulation and select the model with
the minimum criteria value."><script type="text/javascript"> (function(c,l,a,r,i,t,y){ c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}; t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i; y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "m9ts0haeya");</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-8EMHTJZW9H"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8EMHTJZW9H');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dsims</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Function reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/GettingStarted.html">Getting started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dsims-examples.html">Transition from `DSsim` to `dsims`</a></li>
    <li><a class="dropdown-item" href="../articles/dsims_grouped_strata.html">Grouped strata</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/DistanceDevelopment/dsims/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates an Analysis object</h1>
      <small class="dont-index">Source: <a href="https://github.com/DistanceDevelopment/dsims/blob/HEAD/R/ClassConstructors.R" class="external-link"><code>R/ClassConstructors.R</code></a></small>
      <div class="d-none name"><code>make.ds.analysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This method creates an Analysis objects which describes a one or more
models to fit to the distance data. The simulation will fit each of these
models to the data generated in the simulation and select the model with
the minimum criteria value.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make.ds.analysis</span><span class="op">(</span></span>
<span>  dfmodel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="st">"hn"</span>,</span>
<span>  truncation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  cutpoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  er.var <span class="op">=</span> <span class="st">"R2"</span>,</span>
<span>  control.opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  group.strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  criteria <span class="op">=</span> <span class="st">"AIC"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dfmodel">dfmodel<a class="anchor" aria-label="anchor" href="#arg-dfmodel"></a></dt>
<dd><p>list of distance sampling model formula specifying the detection function
(see <code><a href="https://rdrr.io/pkg/Distance/man/ds.html" class="external-link">?Distance::ds</a></code> for further details)</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>key function to use; "hn" gives half-normal (default) and "hr" gives
hazard-rate.</p></dd>


<dt id="arg-truncation">truncation<a class="anchor" aria-label="anchor" href="#arg-truncation"></a></dt>
<dd><p>absolute truncation distance in simulation units matching the
region units.</p></dd>


<dt id="arg-cutpoints">cutpoints<a class="anchor" aria-label="anchor" href="#arg-cutpoints"></a></dt>
<dd><p>supply a vector of cutpoints if you wish the simulation to perform
binned analyses.</p></dd>


<dt id="arg-er-var">er.var<a class="anchor" aria-label="anchor" href="#arg-er-var"></a></dt>
<dd><p>encounter rate variance estimator to use when abundance estimates are
required. Defaults to "R2" for line transects and "P3" for point transects. See
<code><a href="https://rdrr.io/pkg/mrds/man/varn.html" class="external-link">mrds::varn</a></code> for more information / options.</p></dd>


<dt id="arg-control-opts">control.opts<a class="anchor" aria-label="anchor" href="#arg-control-opts"></a></dt>
<dd><p>A list of control options: method - optimisation method,</p></dd>


<dt id="arg-group-strata">group.strata<a class="anchor" aria-label="anchor" href="#arg-group-strata"></a></dt>
<dd><p>Dataframe with two columns ("design.id" and "analysis.id"). The
former gives the strata names as defined in the design (i.e. the region object) the
second specifies how they should be grouped (into less strata) for the analyses. See
details for more information.</p></dd>


<dt id="arg-criteria">criteria<a class="anchor" aria-label="anchor" href="#arg-criteria"></a></dt>
<dd><p>character model selection criteria (AIC, AICc, BIC)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="DS.Analysis-class.html">DS.Analysis-class</a></code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It is possible to group strata at the analysis stage using the group.strata
argument. For example, for design purposes it may have been sensible to
divide strata into substrata. This can help make more convex shapes and
therefore zigzag designs more efficient or perhaps it helped to keep
transects angled parallel to density gradients across the study area.
Despite these (purely design relevant) substrata we may still wish to
calculate estimates of density / abundance etc. for each stratum. The
table below gives an example of the data.frame which can be used to do
this. Imagine a study region with an onshore strata and an offshore
strata. The onshore strata has been divided in two at the design stage
to keep transects perpendicular to the coast. We now want to analyse
this as just two strata the onshore and offshore.</p>
<table class="table table"><tr><td>design.id</td><td>analysis.id</td></tr><tr><td>———</td><td>———–</td></tr><tr><td>onshoreN</td><td>onshore</td></tr><tr><td>onshoreS</td><td>onshore</td></tr><tr><td>offshore</td><td>offshore</td></tr></table></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/Distance/man/ds.html" class="external-link">ds</a></code> <code><a href="make.simulation.html">make.simulation</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Laura Marshall</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model selection considering both a half-normal and a hazard-rate model</span></span></span>
<span class="r-in"><span><span class="co"># using AIC criteria and truncating 5% of the data</span></span></span>
<span class="r-in"><span><span class="va">ds.analyses</span> <span class="op">&lt;-</span> <span class="fu">make.ds.analysis</span><span class="op">(</span>dfmodel <span class="op">=</span> <span class="op">~</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hn"</span>, <span class="st">"hr"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                truncation <span class="op">=</span> <span class="fl">500</span>,</span></span>
<span class="r-in"><span>                                criteria <span class="op">=</span> <span class="st">"AIC"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model selection considering both a half-normal with no covariates and with size</span></span></span>
<span class="r-in"><span><span class="co"># as a covariate using AIC criteria and truncating at 500</span></span></span>
<span class="r-in"><span><span class="va">ds.analyses</span> <span class="op">&lt;-</span> <span class="fu">make.ds.analysis</span><span class="op">(</span>dfmodel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span><span class="fl">1</span>, <span class="op">~</span><span class="va">size</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                key <span class="op">=</span> <span class="st">"hn"</span>,</span></span>
<span class="r-in"><span>                                truncation <span class="op">=</span> <span class="fl">500</span>,</span></span>
<span class="r-in"><span>                                criteria <span class="op">=</span> <span class="st">"AIC"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model selection considering both a half-normal with no covariates and with size</span></span></span>
<span class="r-in"><span><span class="co"># as a covariate and a hazard rate, using AIC criteria and truncating at 500</span></span></span>
<span class="r-in"><span><span class="va">ds.analyses</span> <span class="op">&lt;-</span> <span class="fu">make.ds.analysis</span><span class="op">(</span>dfmodel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span><span class="fl">1</span>, <span class="op">~</span><span class="va">size</span>, <span class="op">~</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hn"</span>, <span class="st">"hn"</span>, <span class="st">"hr"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                truncation <span class="op">=</span> <span class="fl">500</span>,</span></span>
<span class="r-in"><span>                                criteria <span class="op">=</span> <span class="st">"AIC"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>We improve our site and software support by using cookies to see <br> how you use our website.</p>
</div>

<div class="pkgdown-footer-right">
  <p>If you wish to donate to development and maintenance, please <a href="mailto:distance@st-andrews.ac.uk">email us</a>.</p>
</div>

    </footer></div>





  </body></html>

